# 文档结构化编辑器

一个基于 React + Vite 构建的现代化文档结构化编辑系统，支持块级编辑、拖拽排序、引用同步等功能。

## ✨ 功能特性

### 📝 块级编辑
- **文本块 (TextBlock)**: 支持普通文本和标题格式编辑
- **字段块 (FieldBlock)**: 多种输入类型 - 文本、数字、日期、下拉、复选框、文件上传
- **表格块 (TableBlock)**: 类 Excel 表格，支持动态行列操作和简单计算
- **引用块 (ReferenceBlock)**: 引用其他块内容，支持同步检测和更新

### 🎯 交互体验
- **悬浮工具栏**: 鼠标悬停显示操作菜单
- **拖拽排序**: 基于 React DnD 的块排序功能
- **内联编辑**: 点击即可编辑，支持快捷键操作
- **响应式设计**: 适配桌面和移动端

### 🔄 协同功能
- **引用同步**: 自动检测源内容变更
- **版本管理**: 快照保存和历史对比
- **状态指示**: 锁定、同步、过期等状态提示

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

## 📁 项目结构

```
src/
├── components/
│   ├── BlockEditor/           # 块编辑器核心组件
│   │   ├── BlockEditor.jsx    # 主编辑器容器
│   │   ├── BlockToolbar.jsx   # 悬浮工具栏
│   │   ├── TextBlock.jsx      # 文本块组件
│   │   ├── FieldBlock.jsx     # 字段块组件
│   │   ├── TableBlock.jsx     # 表格块组件
│   │   ├── ReferenceBlock.jsx # 引用块组件
│   │   └── SortableBlockItem.jsx # 可拖拽包装器
│   ├── TemplateCenter/        # 模板中心（待实现）
│   ├── VersionPanel/          # 版本面板（待实现）
│   ├── SearchPanel/           # 搜索面板（待实现）
│   └── GraphViewer/           # 关系图谱（待实现）
├── pages/
│   └── EditorDemo.jsx         # 演示页面
├── stores/
│   └── docStore.js            # Zustand 状态管理
├── styles/
│   ├── App.css               # 主样式文件
│   └── index.css             # 基础样式
└── main.jsx                  # 应用入口
```

## 🎨 使用说明

### 基本操作
1. **创建块**: 点击"添加第一个块"或使用工具栏的插入按钮
2. **编辑内容**: 直接点击块内容进行编辑
3. **移动块**: 拖拽块进行重新排序
4. **删除块**: 使用悬浮工具栏的删除按钮

### 高级功能
- **创建引用**: 使用工具栏的引用按钮创建其他块的引用
- **字段配置**: 在字段块中点击"配置"设置字段类型和选项
- **表格操作**: 添加/删除行列，查看计算结果
- **同步更新**: 引用块会自动检测源内容变更

## 🛠️ 技术栈

- **前端框架**: React 18
- **构建工具**: Vite
- **状态管理**: Zustand
- **拖拽功能**: React DnD
- **图标库**: Lucide React
- **样式工具**: 自定义 CSS + 工具类

## 🎯 设计理念

这个项目旨在实现类似 Notion 的块级编辑体验，同时加入了：
- 结构化字段编辑
- 引用关系管理
- 协同编辑准备
- 版本控制支持

## 📋 待实现功能

- [ ] 评论和审批流程
- [ ] 导入导出功能
- [ ] 多人协同编辑
- [ ] 权限管理系统

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License
