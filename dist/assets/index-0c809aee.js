import{c as w}from"./index-c93f190f.js";import{w as N}from"./index-675c549c.js";const l=function(e,t,r,n,i){const a=c(t);if(r!=null&&(typeof r!="number"||r<0||r===Number.POSITIVE_INFINITY))throw new Error("Expected positive finite `index`");if(n!=null&&(!n.type||!n.children))throw new Error("Expected valid `parent`");if(r==null!=(n==null))throw new Error("Expected both `index` and `parent`");return h(e)?a.call(i,e,r,n):!1},c=function(e){if(e==null)return x;if(typeof e=="string")return v(e);if(typeof e=="object")return k(e);if(typeof e=="function")return f(e);throw new Error("Expected function, string, or array as `test`")};function k(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=c(e[r]);return f(n);function n(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function v(e){return f(t);function t(r){return r.tagName===e}}function f(e){return t;function t(r,n,i){return!!(h(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function x(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function h(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const m=c(function(e){return e.tagName==="audio"||e.tagName==="canvas"||e.tagName==="embed"||e.tagName==="iframe"||e.tagName==="img"||e.tagName==="math"||e.tagName==="object"||e.tagName==="picture"||e.tagName==="svg"||e.tagName==="video"}),E=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],A=["button","input","select","textarea"],S=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],B={},u=w(["comment","doctype"]);function G(e,t){g(e,{collapse:T((t||B).newlines?O:W),whitespace:"normal"})}function g(e,t){if("children"in e){const r={...t};return(e.type==="root"||d(e))&&(r.before=!0,r.after=!0),r.whitespace=q(e,t),I(e,r)}if(e.type==="text"){if(t.whitespace==="normal")return F(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:u(e),stripAtStart:!1,remove:!1}}function F(e,t){const r=t.collapse(e.value),n={ignore:!1,stripAtStart:!1,remove:!1};let i=0,a=r.length;return t.before&&p(r.charAt(0))&&i++,i!==a&&p(r.charAt(a-1))&&(t.after?a--:n.stripAtStart=!0),i===a?n.remove=!0:e.value=r.slice(i,a),n}function I(e,t){let r=t.before;const n=t.after,i=e.children;let a=i.length,o=-1;for(;++o<a;){const s=g(i[o],{...t,after:y(i,o,n),before:r});s.remove?(i.splice(o,1),o--,a--):s.ignore||(r=s.stripAtStart),b(i[o])&&(r=!1)}return{ignore:!1,stripAtStart:!!(r||n),remove:!1}}function y(e,t,r){for(;++t<e.length;){const n=e[t];let i=P(n);if(i===void 0&&"children"in n&&!j(n)&&(i=y(n.children,-1)),typeof i=="boolean")return i}return r}function P(e){if(e.type==="element"){if(b(e))return!1;if(d(e))return!0}else if(e.type==="text"){if(!N(e))return!1}else if(!u(e))return!1}function b(e){return m(e)||l(e,A)}function d(e){return l(e,E)}function j(e){return!!(e.type==="element"&&e.properties.hidden)||u(e)||l(e,S)}function p(e){return e===" "||e===`
`}function O(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function W(){return" "}function T(e){return t;function t(r){return String(r).replace(/[\t\n\v\f\r ]+/g,e)}}function q(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}const L={}.hasOwnProperty;function $(e,t){const r=e.type==="element"&&L.call(e.properties,t)&&e.properties[t];return r!=null&&r!==!1}const V=new Set(["pingback","prefetch","stylesheet"]);function Y(e){if(e.type!=="element"||e.tagName!=="link")return!1;if(e.properties.itemProp)return!0;const t=e.properties.rel;let r=-1;if(!Array.isArray(t)||t.length===0)return!1;for(;++r<t.length;)if(!V.has(String(t[r])))return!1;return!0}const _=c(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),z=c("meta");function H(e){return!!(e.type==="text"||_(e)||m(e)||Y(e)||z(e)&&$(e,"itemProp"))}export{c,m as e,G as m,H as p};
//# sourceMappingURL=index-0c809aee.js.map
